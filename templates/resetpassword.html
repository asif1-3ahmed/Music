<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reset Password - Dolsy Music</title>
<style>
body{font-family:"Poppins",sans-serif;background:#000;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;}
.form-box{background:#111;padding:30px;border-radius:8px;width:350px;text-align:center;}
h2{margin-bottom:20px;}
input{width:95%;padding:10px;margin:10px 0;border:none;border-radius:6px;background:#000;color:#fff;}
button{width:100%;padding:10px;border:none;border-radius:6px;background:#fff;color:#000;cursor:pointer;font-weight:600;}
button:hover{background:#000;color:#fff;border:1px solid #fff;}
</style>
</head>
<body>
<div class="form-box">
<h2>Reset Password</h2>
<form action="/reset-password" method="POST" onsubmit="return checkPass()">
<input type="hidden" name="email" value="{{ email }}">
<input type="password" name="password" placeholder="New Password" required>
<input type="password" id="confirmPass" placeholder="Confirm Password" required>
<button type="submit">Reset Password</button>
</form>
</div>

<script>
function checkPass(){
    const pass = document.querySelector("input[name='password']").value;
    const confirm = document.getElementById('confirmPass').value;
    const oldPass = "{{ old_password or '' }}";  // Pass old password hash from Flask

    if(pass !== confirm){
        alert("❌ Passwords do not match!");
        return false;
    }

    // Basic frontend check (optional)
    if(pass === oldPass){
        alert("❌ You cannot reuse your previous password!");
        return false;
    }
    return true;
}
</script>

</body>
</html>
